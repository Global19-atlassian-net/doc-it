<?xml encoding="iso-8859-1"?>
<!-- EN-Revision: 1.15 Maintainer: fabio  Status: ready -->
<reference id="ref.mail">
  <title>Funzioni di Mail</title>
  <titleabbrev>Mail</titleabbrev>
  <partintro>
   <simpara>
     La funzione <function>mail</function> consente di inviare mail.
   </simpara>
  </partintro>


  <refentry id="function.mail">
   <refnamediv>
    <refname>mail</refname>
    <refpurpose>Invio mail</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descrizione</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>bool <function>mail</function></funcdef>
      <paramdef>string <parameter>a</parameter></paramdef>
      <paramdef>string <parameter>soggetto</parameter></paramdef>
      <paramdef>string <parameter>messaggio</parameter></paramdef>
      <paramdef>string 
       <parameter><optional>header_addizionali</optional></parameter>
      </paramdef>
      <paramdef>string 
       <parameter><optional>parametri_addizionali</optional>
       </parameter>
      </paramdef>
     </funcprototype>
    </funcsynopsis>
    <simpara>
      <function>mail</function> invia automaticamente il messaggio specificato
      in <parameter>messaggio</parameter> al destinatario specificato in
      <parameter>a</parameter>. Destinatari multipli possono essere specificati
      mettendo una virgola tra ogni indirizzo in <parameter>a</parameter>.
    </simpara>
    <para>
     <example>
      <title>Inviare mail.</title>
      <programlisting>
mail("rasmus@lerdorf.on.ca", "Soggetto", "Linea 1\nLinea 2\nLinea 3");
      </programlisting>
     </example></para>
    <simpara>
     Se viene passata come parametro una quarta stringa, questa stringa viene inserita
     alla fine dell'intestazione (header).  Ciò viene tipicamente usato per aggiungere intestazioni
     supplementari.  Multipli intestazioni supplementari sono separati da un carattere di "a capo" (newline).
    </simpara>
    <para>
     <example>
      <title>Invio di mail con intestazioni supplementari.</title>
      <programlisting>
mail("nobody@aol.com", "soggetto", $messaggio,
     "From: webmaster@$SERVER_NAME\nReply-To: webmaster@$SERVER_NAME\nX-Mailer: PHP/" . phpversion());
      </programlisting>
     </example>
     Con il quinto parametro è possibile impostare dei parametri addizionali a linea di comando per 
     l'attuale mailer. Nell'esempio che segue viene impostato il corretto valore per il Return-Path per 
     sendmail. Normalmente sendmail aggiunge l'intestazione X-Authentication-Warning
     quando si utilizza il parametro -f, questo perchè l'utente del webserver probabilmente non è
     membro degli utenti trusted. Per annullare questo warning, occorre inserire l'utente del web server
     tra gli utenti trusted nel file di configurazione di sendmail.
    </para>
    <note>
     <para>
      Questo quinto parametro è stato aggiunto in PHP 4.0.5.
     </para>
    </note>
    <para>
     <example>
      <title>Invio di mail con intestazioni supplementari e impostazione dei parametri addizionali a linea di comando.</title>
      <programlisting>
mail("nobody@aol.com", "soggetto", $messaggio,
     "From: webmaster@$SERVER_NAME", "-fwebmaster@$SERVERNAME");
      </programlisting>
     </example>
     E' possibile costruire messaggi complessi utilizzando la tecnica di concatenazione delle stringhe. 
     <example>
      <title>Invio di mail complessa.</title>
      <programlisting>
/* destinatari */
$destinatari .= "Mary &lt;mary@u.college.edu>" . ", " ; //note the comma
$destinatari .= "Kelly &lt;kelly@u.college.edu>" . ", ";
$destinatari .= "ronabop@php.net";

/* soggetto */
$soggetto = "Promemoria compleanno per Agosto";

/* messaggio */
$messaggio .= "La seguente mail include una tabella ASCII formattata\n";
$messaggio .= "Giorno \t\tMese \t\tAnno\n";
$messaggio .= "3-terzo \t\tAgo \t\t1970\n";
$messaggio .= "17-esimo\t\tAgo \t\t1973\n";

/* è possibile inserire una blocco con la firma */ 
$messaggio .= "--\r\n"; //Delimitatore di firma
$messaggio .= "Promemoria di compleanno con senza proprietà d'autore ma di pubblico dominio";

/* intestazioni addizionali per errori, campo CC, BCC, etc */

$intestazioni .= "From: Birthday Reminder &lt;birthday@php.net>\n";
$intestazioni .= "X-Sender: &lt;birthday@php.net>\n"; 
$intestazioni .= "X-Mailer: PHP\n"; // mailer
$intestazioni .= "X-Priority: 1\n"; // Messaggio urgente!
$intestazioni .= "Return-Path: &lt;birthday@php.net>\n";  // Indirizzo di ritorno per errori

/* Se si vuole inviare una mail in formato html, togliere il commento alla seguente linea */
// $intestazioni .= "Content-Type: text/html; charset=iso-8859-1\n"; // Tipo Mime

$intestazioni .= "cc:birthdayarchive@php.net\n"; // CC in copia a
$intestazioni .= "bcc:birthdaycheck@php.net, birthdaygifts@php.net\n"; // BCC in copia cieca a

/* ed infine l'invio */
mail($destinatari, $soggetto, $mesaggio, $intestazioni);
      </programlisting>
     </example>
    </para>
    
   </refsect1>
  </refentry>

  <refentry id="function.ezmlm-hash">
   <refnamediv>
    <refname>ezmlm_hash</refname>
    <refpurpose>Calcola il valore hash che occorre a EZMLM</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descrizione</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ezmlm_hash</function></funcdef>
      <paramdef>string <parameter>addr</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <simpara>
     <function>ezmlm_hash</function> calcola il valore hash che occorre
     quando si mantengono mailing list EZMLM in un database MySQL.
    </simpara>
    <para>
     <example>
      <title>Calcolare l'hash e sottoscrivere un utente</title>
      <programlisting>
$utente = "kris@koehntopp.de";
$hash = ezmlm_hash ($utente);
$query = sprintf ("INSERT INTO esempio VALUES (%s, '%s')", $hash, $utente);
$db->query($query); // tramite l'interfaccia db PHPLIB
      </programlisting>
     </example>
    </para>
   </refsect1>
  </refentry>

 </reference>

 <!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
