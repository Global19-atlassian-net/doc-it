<?xml version="1.0" encoding="iso-8859-1"?>
<!-- EN-Revision: 1.23 Maintainer: darvin  Status: ready -->
 <reference id="ref.snmp">
  <title>Funzioni per SNMP</title>
  <titleabbrev>SNMP</titleabbrev>

  <partintro>
   <simpara>
    Per potere utilizzare le funzioni SNMP su un sistema Unix, occorre installare il 
    pacchetto <ulink url="&url.ucd-snmp;">UCD SNMP</ulink>. Sui sistemi Windows, invece, 
    le funzioni SNMP sono disponibili soltanto su NT e non su sistemi Windows 95 e 98.    
   </simpara>  

   <simpara>
    Attenzione: per potere usare il pacchetto UCD SNMP, occorre definire
    NO_ZEROLENGTH_COMMUNITY a 1 prima di compilarlo. Dopo avere configurato 
    UCD SNMP, occorre editare il file config.h, cercare NO_ZEROLENGTH_COMMUNITY
    e decommentare la linea #define. Alla fine si deve ottenere:
   </simpara>

   <para>
    <programlisting role="c">
<![CDATA[
#define NO_ZEROLENGTH_COMMUNITY 1
]]>
    </programlisting>
   </para>

   <simpara>
    Se durante l'uso dei comandi SNMP dovessero comparire degli errori di "segmentation fault",
    non seguire le istruzioni precedenti. Se non si desidera ricompilare il pacchetto
    UCD SNMP, si può optare per compilare PHP con l'opzione --enable-ucd-snmp-hack che
    aggira questo problema.
   </simpara>
    
  </partintro>

  <refentry id="function.snmpget">
   <refnamediv>
    <refname>snmpget</refname>
    <refpurpose>Preleva un oggetto SNMP</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descrizione</title>
     <methodsynopsis>
      <type>string</type><methodname>snmpget</methodname>
      <methodparam><type>string</type><parameter>hostname</parameter></methodparam>
      <methodparam><type>string</type><parameter>community</parameter></methodparam>
      <methodparam><type>string</type><parameter>object_id</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>timeout</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>retries</parameter></methodparam>
     </methodsynopsis>

    <para>
     La funzione restituisce il valore di un oggetto SNMP se ha successo, altrimenti &false; se si verificano errori
    </para>  

    <para>
     La funzione <function>snmpget</function>, viene utilizzata per 
     leggere il valore dell'oggetto SNMP specificato da
     <parameter>object_id</parameter>. L'agente SNMP a cui accedere viene specificato
     nel parametro <parameter>hostname</parameter>, mentre la comunità viene 
     indicata in <parameter>community</parameter>.
    </para>

    <para>
     <informalexample>
      <programlisting role="php">
<![CDATA[
$syscontact = snmpget("127.0.0.1", "public", "system.SysContact.0");
]]>
      </programlisting>
     </informalexample>
    </para>

   </refsect1>
  </refentry>

  <refentry id="function.snmpset">
   <refnamediv>
    <refname>snmpset</refname>
    <refpurpose>Valorizza un oggetto SNMP</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descrizione</title>
     <methodsynopsis>
      <type>bool</type><methodname>snmpset</methodname>
      <methodparam><type>string</type><parameter>hostname</parameter></methodparam>
      <methodparam><type>string</type><parameter>community</parameter></methodparam>
      <methodparam><type>string</type><parameter>object_id</parameter></methodparam>
      <methodparam><type>string</type><parameter>type</parameter></methodparam>
      <methodparam><type>mixed</type><parameter>value</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>timeout</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>retries</parameter></methodparam>
     </methodsynopsis>

    <para>
     Setta il valore di un specifico oggetto SNMP. La funzione restituisce &true;
     se ha successo, &false; se si verifica un errore.
    </para>

    <para>
     La funzione <function>snmpset</function> viene usata per 
     settare il valore dell'oggetto SNMP indicato dal parametro
     <parameter>object_id</parameter>. L'agente SNMP viene indicato nel parametro
     <parameter>hostname</parameter> e la comunità viene specificata 
     nel parametro <parameter>community</parameter>.
    </para>

   </refsect1>
  </refentry>

  <refentry id="function.snmpwalk">
   <refnamediv>
    <refname>snmpwalk</refname>
    <refpurpose>Scarica tutti gli oggetti SNMP da un agente</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descrizione</title>
     <methodsynopsis>
      <type>array</type><methodname>snmpwalk</methodname>
      <methodparam><type>string</type><parameter>hostname</parameter></methodparam>
      <methodparam><type>string</type><parameter>community</parameter></methodparam>
      <methodparam><type>string</type><parameter>object_id</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>timeout</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>retries</parameter></methodparam>
     </methodsynopsis>

    <para>
     La funzione restituisce un array con i valori degli oggetti SNMP
     utilizzando <parameter>object_id</parameter> come punto di partenza, oppure &false; se si verifica un errore.
    </para>

    <para> 
     La funzione <function>snmpwalk</function>  viene utilizzata per leggere
     tutti i valori dall'agente SNMP specificato nel parametro
     <parameter>hostname</parameter>. Il parametro <parameter>Community</parameter>
     specifica la comunità per l'agente. Con l'impostazione a &null; del parametro
     <parameter>object_id</parameter> si indica la radice dell'albero degli oggetti
     SNMP, pertanto saranno restituiti nell'array tutti gli oggetti 
     dell'albero. Viceversa se si indica un valore per <parameter>object_id</parameter>,
     sarranno restituiti tutti gli oggetti sottostanti 
     <parameter>object_id</parameter>.

     <informalexample>
      <programlisting role="php"> 
<![CDATA[
$a = snmpwalk("127.0.0.1", "public", ""); 
]]>
      </programlisting>
     </informalexample>
    </para> 

    <para>
     L'esempio precedente mostra come recuperare tutti gli oggetti SNMP
     dall'agente attivo sulla macchina locale. Tramite un loop (illustrato di seguito)
     si può accedere a tutti i valori.

     <informalexample>
      <programlisting role="php">
<![CDATA[
for ($i=0; $i < count($a); $i++) {
    echo $a[$i];
}
]]>
      </programlisting>
     </informalexample>
    </para>
	
   </refsect1>
  </refentry>


  <refentry id="function.snmpwalkoid">
   <refnamediv>
    <refname>snmpwalkoid</refname>
    <refpurpose>Richiesta dell'albero delle informazioni di una macchina di rete
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descrizione</title>
     <methodsynopsis>
      <type>array</type><methodname>snmpwalkoid</methodname>
      <methodparam><type>string</type><parameter>hostname</parameter></methodparam>
      <methodparam><type>string</type><parameter>community</parameter></methodparam>
      <methodparam><type>string</type><parameter>object_id</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>timeout</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>retries</parameter></methodparam>
     </methodsynopsis>

    <para>
     La funzione restituisce un array associativo contenente gli id degli oggetti
     ed il loro rispettivo valore usando l'oggetto indicato in <parameter>object_id</parameter>
     come radice. Se si verificano degli errori la funzione restituisce &false;.
    </para>
    
    <para>
     La funzione <function>snmpwalkoid</function> viene utilizzata per leggere 
     gli id di tutti gli oggetti SNMP ed i relativi valori da un agente
     SNMP presente sul server indicato da <parameter>hostname</parameter>. La comunità viene
     specificata nel parametro <parameter>community</parameter>. Con l'impostazione a &null; 
     del parametro <parameter>object_id</parameter> si indica la radice dell'albero 
     degli oggetti SNMP, pertanto saranno restituiti nell'array tutti gli oggetti 
     dell'albero. Viceversa se si indica un valore per <parameter>object_id</parameter>,
     sarranno restituiti tutti gli oggetti sottostanti a
     <parameter>object_id</parameter>.
    </para>

    <para>
     La presenza delle due funzioni <function>snmpwalkoid</function>
     e <function>snmpwalk</function> ha ragioni storiche. Sono presenti
     entrambe per compatibilità con il passato.

     <informalexample>
      <programlisting role="php"> 
<![CDATA[
$a = snmpwalkoid("127.0.0.1", "public", ""); 
]]>
      </programlisting>
     </informalexample>
    </para> 

    <para>
     L'esempio precedente mostra come recuperare tutti gli oggetti SNMP
     dall'agente attivo sulla macchina locale. Tramite un loop (illustrato di seguito)
     si può accedere a tutti i valori.

     <informalexample>
      <programlisting role="php">
<![CDATA[
for (reset($a); $i = key($a); next($a)) {
    echo "$i: $a[$i]<br>\n";
}
]]>
      </programlisting>
     </informalexample>
    </para>	
   
   </refsect1>
  </refentry>


  <refentry id="function.snmp-get-quick-print">
   <refnamediv>
    <refname>snmp_get_quick_print</refname>
    <refpurpose>Restituisce il valore corrente per il parametro quick_print della libreria UCD
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descrizione</title>
     <methodsynopsis>
      <type>bool</type><methodname>snmp_get_quick_print</methodname>
      <void/>
     </methodsynopsis>

    <para>
     La funzione restituisce il valore del parametro quick_print della libreria 
     UCD. Per default quick_print è settato ad off.

     <informalexample>
      <programlisting role="php"> 
<![CDATA[
$quickprint = snmp_get_quick_print();
]]>
      </programlisting>
     </informalexample>
    </para> 

    <para>
     Nell'esempio precedente la funzione restituirebbe &false;
     se quick_print fosse ad off, &true; se quick_print
     fosse ad on.
    </para>

    <para>
     La funzione <function>snmp_get_quick_print</function> è disponibile 
     soltanto con l'uso della libreria UCD SNMP. Questa funzione non è disponibile
     nella libreria SNMP per Windows.
    </para>

    <para>
     Vedere <function>snmp_set_quick_print</function> per una descrizione
     completa di quick_print.
    </para>
	
   </refsect1>
  </refentry>

  <refentry id="function.snmp-set-quick-print">
   <refnamediv>
    <refname>snmp_set_quick_print</refname>
    <refpurpose>Setta il valore di quick_print
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descrizione</title>
     <methodsynopsis>
      <type>void</type><methodname>snmp_set_quick_print</methodname>
      <methodparam><type>bool</type><parameter>quick_print</parameter></methodparam>
     </methodsynopsis>

    <para>
     La funzione setta il valore del parametro quick_print della libreria UCD SNMP.
     Quando è attivo (1), la libreria SNMP restituisce valori 'quick printed'. Ciò
     significa che saranno visualizzati solo i valori. Quando quick_print non è attivo
     (default), la libreria UCD SNMP visualizzerà informazioni extra
     tra i quali il tipo del valore (per esempio IpAddress oppure OID). Inoltre,
     se quick_print non è abilitato, la libreria visualizza il valore esadecimale
     per tutte le stringhe di tre caratteri o meno.
    </para>

    <para>
     L'attivazione di quick_print viene spesso usata quando l'informazione restuita
     viene utilizzata piuttosto che visualizzata.

     <informalexample>
      <programlisting role="php"> 
<![CDATA[
snmp_set_quick_print(0);
$a = snmpget("127.0.0.1", "public", ".1.3.6.1.2.1.2.2.1.9.1");
echo "$a<BR>\n";
snmp_set_quick_print(1);
$a = snmpget("127.0.0.1", "public", ".1.3.6.1.2.1.2.2.1.9.1");
echo "$a<BR>\n";
]]>
      </programlisting>
     </informalexample>
    </para> 

    <para>
     Il primo valore visualizzato può essere 'Timeticks: (0) 0:00:00.00', mentre
     con quick_print abilitato sarebbe stato '0:00:00.00'.
    </para>

    <para>
     Per default la libreria UCD SNMP restituisce valori discorsivi, mentre quick_print
     viene usato per avere solo il valore.
    </para>

    <para>
     Attualmente le stringhe sono restituite con apici aggiuntivi, questo
     sarà corretto in una release successiva.
    </para>

    <para>
     La funzione <function>snmp_set_quick_print</function> è disponibile 
     soltanto con l'uso della libreria UCD SNMP. Questa funzione non è disponibile
     nella libreria SNMP per Windows.
    </para>

   </refsect1>
  </refentry>

  <refentry id='function.snmprealwalk'>
   <refnamediv>
    <refname>snmprealwalk</refname>
    <refpurpose>
     Restituisce tutti gli oggetti compresi i rispettivi id
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descrizione</title>
     <methodsynopsis>
      <type>array</type><methodname>snmprealwalk</methodname>
      <methodparam><type>string</type><parameter>host</parameter></methodparam>
      <methodparam><type>string</type><parameter>community</parameter></methodparam>
      <methodparam><type>string</type><parameter>object_id</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>timeout</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>retries</parameter></methodparam>
     </methodsynopsis>
    <para>
     &warn.undocumented.func;
    </para>
   </refsect1>
  </refentry>
  
 </reference>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->

