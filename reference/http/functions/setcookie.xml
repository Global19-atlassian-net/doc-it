<?xml version="1.0" encoding="iso-8859-1"?>
<!-- splitted from ./it/functions/http.xml, last change in rev 1.14 -->
<!-- last change to 'setcookie' in en/ tree in rev 1.2 -->
<!-- EN-Revision: 1.2 Maintainer: alan_dangelo Status: ready -->
<!-- OLD-Revision: 1.34/EN.1.2 -->
  <refentry xml:id="function.setcookie" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
   <refnamediv>
    <refname>setcookie</refname>
    <refpurpose>Spedisce un cookie</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Descrizione</title>
     <methodsynopsis>
      <type>int</type><methodname>setcookie</methodname>
      <methodparam><type>string</type><parameter>name</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>value</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>expire</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>path</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>domain</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>secure</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>setcookie</function> definisce un cookie da inviare insieme 
     alle altre informazioni di header. I cookie devono essere spediti
     <emphasis>prima</emphasis> di qualsiasi altra intestazione (questa è 
     una restrizione dei cookies, non di PHP). E' necessario perciò chiamare 
     la funzione <function>setcookie</function> <emphasis>prima</emphasis> di 
     qualsiasi tags, anche <literal>&lt;html></literal> o <literal>&lt;head></literal>.
    </para>
    <para>
     Tutti gli argomenti della funzione eccetto <parameter>name</parameter>
     sono opzionali. Se viene passato alla funzione solo l'argomento 
     <parameter>name</parameter>, il cookie registrato con quel nome 
     verrà cancellato dal client su cui è archiviato. E' possibile 
     sostituire gli argomenti che non si intende specificare utitlizzando 
     una stringa vuota (<emphasis>&quot;&quot;</emphasis>). Gli argomenti 
     <parameter>expire</parameter> e <parameter>secure</parameter> che richiedono
     numeri interi, non possono essere omessi inserendo una stringa vuota, per 
     questo scopo si usa (<emphasis>0</emphasis>). L'argomento 
     <parameter>expire</parameter> è un normale intero Unix Timestamp ottenibile
     grazie alle funzioni <function>time</function> o <function>mktime</function>.
     <parameter>secure</parameter> sta ad indicare che il cookie dovrebbe essere
     trasmesso soltanto attraverso un collegamento sicuro di tipo HTTPS.
    </para>
    <para>
     Errori comuni:
     <itemizedlist>
      <listitem>
       <simpara>
        I cookie diventano disponibili soltanto dalla pagina successiva a quella
        che li ha generati, o dopo il ricaricamento di questa. 
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        I cookie devono essere cancellati specificando gli stessi parametri con cui sono stati creati.
       </simpara>
      </listitem>
     </itemizedlist>
    </para>
    <simpara>
     In PHP 3, chiamate successive di <function>setcookie</function>
     nello stesso script sono eseguite in ordine inverso. Se state provando 
     a cancellare un cookie prima dell' inserimento di un altro cookie, 
     dovete creare il secondo prima della cancellazione del primo. In PHP 4, 
     chiamate successive di <function>setcookie</function> invece, sono eseguite secondo l'ordine di chiamata. 
    </simpara>
    <para>
     Alcuni esempi sul modo di spedire cookie:
     <example>
      <title><function>setcookie</function> esempi di spedizione/creazione</title>
      <programlisting role="php">
<![CDATA[
setcookie ("TestCookie", "Test Value");
setcookie ("TestCookie", $value,time()+3600);  /* aspira in 1 ora */
setcookie ("TestCookie", $value,time()+3600, "/~rasmus/", ".utoronto.ca", 1);
]]>
      </programlisting>
     </example>
    </para>
    <para>
     Gli esempi mostrano come cancellare i cookie introdotti nell'esempio precedente:
     <example>
      <title><function>setcookie</function> esempi di cancellazione</title>
      <programlisting role="php">
<![CDATA[
setcookie ("TestCookie");
// set the expiration date to one hour ago
setcookie ("TestCookie", "", time() - 3600);
setcookie ("TestCookie", "", time() - 3600, "/~rasmus/", ".utoronto.ca", 1);
]]>
      </programlisting>
     </example>
     Per cancellare un cookie dovete assicurarvi che la data di scadenza del 
     cookie sia già trascorsa, in questo modo il cookie verrà rimosso dal client.
    </para>
    <para>
     Si noti che i valori salvati nei cookies sono automaticamente codificati
     per la trasmissione via URL (urlencoded) quando il cookie viene inviato, 
     e che al momento del richiamo sono automaticamente decodificati e assegnati ad 
     una variabile che ha lo stesso nome del cookie. Per vedere il contenuto di 
     un cookie in uno script, si usa una di queste due sintassi: 
     <informalexample>
      <programlisting role="php">
<![CDATA[
echo $TestCookie;
echo $HTTP_COOKIE_VARS["TestCookie"];
]]>
      </programlisting>
     </informalexample>
    </para>
    <para>
     Potete registrare array in un cookie usando la notazione degli array 
     al posto del nome del cookie. Questo equivale alla spedizione di tanti 
     cookie quanti sono gli elementi dell'array, ma si ha un vantaggio: quando 
     il cookie è ricevuto, tutti i suoi valori sono ordinati in un singolo array 
     che ha per nome il nome del cookie:
     <informalexample>
      <programlisting role="php">
<![CDATA[
setcookie ("cookie[three]", "cookiethree");
setcookie ("cookie[two]", "cookietwo");
setcookie ("cookie[one]", "cookieone");
if (isset ($cookie)) {
    while (list ($name, $value) = each ($cookie)) {
        echo "$name == $value&lt;br>\n";
    }
}
]]>
      </programlisting>
     </informalexample>
    </para>
    <para>
     Per saperne di più sui cookies, Netscape's cookie
     specification è la risorsa giusta <link
     xlink:href="&spec.cookies;">&spec.cookies;</link>.
    </para>
    <simpara>
     Microsoft Internet Explorer 4 con Service Pack 1 non 
     crea correttamente cookie che hanno il parametro 
     <parameter>path</parameter> specificato.
    </simpara>
    <simpara>
     Netscape Communicator 4.05 e Microsoft Internet Explorer 3.x 
     sembrano utilizzare in modo errato i cookie quando 
     <parameter>path</parameter> ed <parameter>expire</parameter> non sono specificati.
    </simpara>
   </refsect1>
  </refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
